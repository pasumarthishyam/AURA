<div class="input-container" [class.disabled]="!isInitialized()">
    <div class="input-wrapper">
        <input type="text" class="message-input"
            [placeholder]="isInitialized() ? 'Message AURA...' : 'Initialize system to begin...'"
            [disabled]="!isInitialized() || isThinking()" [value]="message()"
            (input)="message.set($any($event.target).value)" (keydown)="onKeydown($event)" />

        <!-- Microphone Button -->
        <button class="mic-btn" [disabled]="!isInitialized() || isThinking()" type="button">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" x2="12" y1="19" y2="22" />
            </svg>
        </button>

        <button class="send-btn" [disabled]="!isInitialized() || isThinking() || !message().trim()"
            (click)="sendMessage()">
            @if (isThinking()) {
            <div class="loading-pulse small">
                <span></span><span></span><span></span>
            </div>
            } @else {
            <mat-icon>send</mat-icon>
            }
        </button>
    </div>

    <div class="input-hint">
        <span>Press <kbd>Enter</kbd> to send</span>
    </div>
</div>